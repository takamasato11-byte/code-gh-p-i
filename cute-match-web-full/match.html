<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ”¥ Háº¹n HÃ² - Cute Match</title>
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <!-- HEADER -->
  <header>
    <span class="logo">ğŸ’˜ Cute Match</span>
    <nav>
      <a href="index.html">ğŸ  Trang Chá»§</a>
      <a href="account.html">ğŸ‘¤ TÃ i Khoáº£n</a>
      <a href="match.html">ğŸ”¥ Háº¹n HÃ²</a>
      <a href="feed.html">ğŸ“ Báº£ng Tin</a>
      <a href="chat.html">ğŸ’¬ TrÃ² Chuyá»‡n</a>
      <button id="darkModeToggle" class="theme-toggle">ğŸŒ™</button>
    </nav>
  </header>

  <main>
    <div class="container">
      <!-- MATCHING OPTIONS -->
      <div class="section">
        <h2 class="section-title">ğŸ¯ Chá»n Kiá»ƒu Háº¹n HÃ² Cá»§a Báº¡n</h2>
        <div class="feature-grid">
          <div class="feature-box" onclick="startMatch('interests')">
            <div class="feature-icon">â¤ï¸</div>
            <h3 class="feature-title">Háº¹n HÃ² Theo Sá»Ÿ ThÃ­ch</h3>
            <p class="feature-desc">TÃ¬m nhá»¯ng ngÆ°á»i cÃ³ sá»Ÿ thÃ­ch giá»‘ng nhau</p>
          </div>
          <div class="feature-box" onclick="startMatch('location')">
            <div class="feature-icon">ğŸ“</div>
            <h3 class="feature-title">Háº¹n HÃ² Theo Vá»‹ TrÃ­</h3>
            <p class="feature-desc">Gáº·p nhá»¯ng ngÆ°á»i gáº§n báº¡n</p>
          </div>
          <div class="feature-box" onclick="startMatch('age')">
            <div class="feature-icon">ğŸ‚</div>
            <h3 class="feature-title">Háº¹n HÃ² Theo Tuá»•i</h3>
            <p class="feature-desc">Chá»n khoáº£ng tuá»•i cá»§a báº¡n</p>
          </div>
          <div class="feature-box" onclick="startMatch('anonymous')">
            <div class="feature-icon">ğŸ‘»</div>
            <h3 class="feature-title">Háº¹n HÃ² áº¨n Danh</h3>
            <p class="feature-desc">Háº¹n hÃ² bÃ­ áº©n!</p>
          </div>
          <div class="feature-box" onclick="startMatch('random')">
            <div class="feature-icon">ğŸ²</div>
            <h3 class="feature-title">Háº¹n HÃ² 5 PhÃºt</h3>
            <p class="feature-desc">Háº¹n hÃ² ngáº«u nhiÃªn nhanh chÃ³ng</p>
          </div>
          <div class="feature-box" onclick="startMatch('voice')">
            <div class="feature-icon">ğŸ§</div>
            <h3 class="feature-title">Háº¹n HÃ² Báº±ng Giá»ng NÃ³i</h3>
            <p class="feature-desc">Chia sáº» giá»›i thiá»‡u giá»ng nÃ³i 10 giÃ¢y</p>
          </div>
        </div>
      </div>

      <!-- CURRENT MATCH DISPLAY -->
      <div id="matchContainer" class="card" style="display: none;">
        <div class="card-header" id="matchModeTitle">ğŸ”¥ TÃ¬m Tháº¥y NgÆ°á»i Háº¹n!</div>
        
        <div class="text-center">
          <div class="user-card" style="margin: 20px auto;">
            <div class="avatar" id="matchAvatar">ğŸ‘©</div>
            <div class="user-name" id="matchName">Sarah, 24</div>
            <div class="user-meta" id="matchMeta">ğŸ“ TP. Há»“ ChÃ­ Minh</div>
            <div class="match-meter">
              <div class="match-percentage" id="compatibilityScore">87%</div>
              <div class="progress-bar">
                <div class="progress-fill" id="compatProgress" style="width: 87%;"></div>
              </div>
              <p id="compatibilityReason">NgÆ°á»i háº¹n tuyá»‡t vá»i dá»±a trÃªn sá»Ÿ thÃ­ch chung!</p>
            </div>
            <div class="user-interests" id="matchInterests">
              <span class="tag pink">Du Lá»‹ch</span>
              <span class="tag purple">CÃ  PhÃª</span>
              <span class="tag blue">Ã‚m Nháº¡c</span>
            </div>
            <p id="matchBio">"YÃªu khÃ¡m phÃ¡ nhá»¯ng nÆ¡i má»›i vÃ  gáº·p gá»¡ con ngÆ°á»i má»›i!"</p>
          </div>
        </div>

        <div class="card-section">
          <strong>ğŸ“Š PhÃ¢n TÃ­ch Äá»™ TÆ°Æ¡ng ThÃ­ch:</strong>
          <div style="margin-top: 15px;">
            <div style="display: flex; justify-content: space-between; margin: 8px 0;">
              <span>Sá»Ÿ ThÃ­ch PhÃ¹ Há»£p:</span>
              <span>85%</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" style="width: 85%;"></div>
            </div>
            <div style="display: flex; justify-content: space-between; margin: 8px 0;">
              <span>Vá»‹ TrÃ­ PhÃ¹ Há»£p:</span>
              <span>100%</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" style="width: 100%;"></div>
            </div>
            <div style="display: flex; justify-content: space-between; margin: 8px 0;">
              <span>Khoáº£ng Tuá»•i:</span>
              <span>90%</span>
            </div>
            <div class="progress-bar">
              <div class="progress-fill" style="width: 90%;"></div>
            </div>
          </div>
        </div>

        <div class="text-center mt-20">
          <button class="btn" onclick="likeMatch()">â¤ï¸ ThÃ­ch & TrÃ² Chuyá»‡n</button>
          <button class="btn secondary" onclick="skipMatch()">ğŸ‘» Bá» Qua</button>
          <button class="btn outline mt-10" onclick="viewProfile()">ğŸ‘ï¸ Xem Há»“ SÆ¡ Äáº§y Äá»§</button>
        </div>
      </div>

      <!-- FILTERS PANEL -->
      <div id="filtersContainer" class="card" style="display: none;">
        <div class="card-header">ğŸ¯ Äáº·t TÃ¹y Chá»n Cá»§a Báº¡n</div>
        
        <div class="card-section">
          <label>ğŸ‚ Khoáº£ng Tuá»•i</label>
          <div style="margin: 15px 0;">
            <input type="range" id="ageMin" min="18" max="50" value="20"> 
            <span id="ageMinDisplay">20</span> Ä‘áº¿n 
            <input type="range" id="ageMax" min="18" max="80" value="30"> 
            <span id="ageMaxDisplay">30</span> tuá»•i
          </div>
        </div>

        <div class="card-section">
          <label>â¤ï¸ TÃ´i Äang TÃ¬m Kiáº¿m</label>
          <div class="radio-group">
            <label class="radio-label">
              <input type="radio" name="lookingfor" value="male"> ğŸ‘¨ ÄÃ n Ã”ng
            </label>
            <label class="radio-label">
              <input type="radio" name="lookingfor" value="female"> ğŸ‘© Phá»¥ Ná»¯
            </label>
            <label class="radio-label">
              <input type="radio" name="lookingfor" value="both"> ğŸ‘« Cáº£ Hai
            </label>
          </div>
        </div>

        <div class="card-section">
          <label>ğŸ“ Khoáº£ng CÃ¡ch</label>
          <input type="range" id="distance" min="1" max="100" value="25">
          <p>BÃ¡n kÃ­nh <span id="distanceDisplay">25</span> km</p>
        </div>

        <div class="card-section">
          <label>ğŸ˜Š Sá»Ÿ ThÃ­ch Chung</label>
          <div class="checkbox-group">
            <label class="checkbox-label">
              <input type="checkbox" value="travel"> ğŸŒ Du Lá»‹ch
            </label>
            <label class="checkbox-label">
              <input type="checkbox" value="music"> ğŸµ Ã‚m Nháº¡c
            </label>
            <label class="checkbox-label">
              <input type="checkbox" value="food"> ğŸ• áº¨m Thá»±c
            </label>
            <label class="checkbox-label">
              <input type="checkbox" value="movies"> ğŸ¬ Phim áº¢nh
            </label>
            <label class="checkbox-label">
              <input type="checkbox" value="fitness"> ğŸ’ª Thá»ƒ Dá»¥c
            </label>
            <label class="checkbox-label">
              <input type="checkbox" value="art"> ğŸ¨ Nghá»‡ Thuáº­t
            </label>
          </div>
        </div>

        <button class="btn full mt-20" onclick="applyFilters()">Ãp Dá»¥ng Bá»™ Lá»c & Báº¯t Äáº§u Háº¹n HÃ²!</button>
      </div>

      <!-- RECENT MATCHES -->
      <div class="section">
        <h2 class="section-title">ğŸ’• Nhá»¯ng NgÆ°á»i Háº¹n Gáº§n ÄÃ¢y</h2>
        <div class="grid">
          <div class="user-card">
            <div class="avatar">ğŸ‘¸</div>
            <div class="user-name">Sarah, 24</div>
            <div class="user-meta">ğŸŸ¢ Trá»±c Tuyáº¿n</div>
            <div style="margin: 10px 0; font-size: 28px;">â¤ï¸ ÄÃ£ GhÃ©p Cáº·p!</div>
            <button class="btn small full">Má»Ÿ TrÃ² Chuyá»‡n</button>
          </div>
          <div class="user-card">
            <div class="avatar">ğŸ’ƒ</div>
            <div class="user-name">Emma, 23</div>
            <div class="user-meta">â° 30 phÃºt trÆ°á»›c</div>
            <div style="margin: 10px 0; font-size: 28px;">â¤ï¸ ÄÃ£ GhÃ©p Cáº·p!</div>
            <button class="btn small full">Má»Ÿ TrÃ² Chuyá»‡n</button>
          </div>
          <div class="user-card">
            <div class="avatar">ğŸ‘¯</div>
            <div class="user-name">Lisa, 25</div>
            <div class="user-meta">ğŸ’¬ ThÃ­ch báº¡n</div>
            <div style="margin: 10px 0; font-size: 28px;">ğŸ’“ ThÃ­ch Láº¡i?</div>
            <button class="btn small full success">ThÃ­ch Láº¡i</button>
          </div>
          <div class="user-card">
            <div class="avatar">ğŸ§‘â€ğŸ¦°</div>
            <div class="user-name">Jessica, 26</div>
            <div class="user-meta">ğŸŸ¢ Trá»±c Tuyáº¿n</div>
            <div style="margin: 10px 0; font-size: 28px;">ğŸ‘€ Xem Há»“ SÆ¡</div>
            <button class="btn small full">Xem</button>
          </div>
        </div>
      </div>

      <!-- CRUSH RADAR FEATURE -->
      <div class="card">
        <div class="card-header">ğŸ‘€ Radar Crush - Nhá»¯ng ThÃ­ch BÃ­ Máº­t</div>
        <p>ThÃ­ch bÃ­ máº­t ai Ä‘Ã³! Náº¿u há» thÃ­ch báº¡n láº¡i, báº¡n sáº½ Ä‘Æ°á»£c ghÃ©p cáº·p ngay láº­p tá»©c vÃ  trÃ² chuyá»‡n má»Ÿ ra! ğŸ’¥</p>
        <div class="feature-grid">
          <div class="feature-box">
            <div class="feature-icon">ğŸ‘€</div>
            <h3 class="feature-title">10 ThÃ­ch BÃ­ Máº­t</h3>
            <p class="feature-desc">má»—i ngÃ y miá»…n phÃ­</p>
          </div>
          <div class="feature-box">
            <div class="feature-icon">ğŸ’¥</div>
            <h3 class="feature-title">GhÃ©p Cáº·p Tá»©c ThÃ¬</h3>
            <p class="feature-desc">Khi cáº£ hai thÃ­ch nhau</p>
          </div>
          <div class="feature-box">
            <div class="feature-icon">ğŸ””</div>
            <h3 class="feature-title">ThÃ´ng BÃ¡o</h3>
            <p class="feature-desc">Nháº­n cáº£nh bÃ¡o vá» crush má»›i</p>
          </div>
        </div>
        <button class="btn full mt-20">ğŸ’• Báº¯t Äáº§u Sá»­ Dá»¥ng Radar Crush</button>
      </div>

      <!-- QUICK MATCHING GAME -->
      <div class="card">
        <div class="card-header">ğŸ® TrÃ² ChÆ¡i GhÃ©p Cáº·p 5 PhÃºt</div>
        <p>GhÃ©p cáº·p nhanh chÃ³ng! Xem ngÆ°á»i má»›i 7 giÃ¢y má»™t láº§n. ğŸš€</p>
        <div class="text-center" style="margin: 20px 0;">
          <div style="font-size: 64px; margin: 20px 0;">â±ï¸</div>
          <p style="font-size: 18px; font-weight: 700;">5:00 cÃ²n láº¡i</p>
          <p>Hiá»‡n Ä‘Ã£ ghÃ©p cáº·p vá»›i 3 ngÆ°á»i. TÄƒng tá»‘c! ğŸ’¨</p>
        </div>
        <div class="text-center">
          <button class="btn" onclick="startQuickMatch()">ğŸš€ Báº¯t Äáº§u GhÃ©p Cáº·p 5 PhÃºt</button>
          <button class="btn secondary" onclick="stopQuickMatch()">â¹ï¸ Dá»«ng</button>
        </div>
      </div>
    </div>
  </main>

  <!-- FOOTER -->
  <footer>
    <p>ğŸ’– Cute Match Â© 2026 | <a href="#">Quyá»n RiÃªng TÆ°</a> | <a href="#">Äiá»u Khoáº£n</a> | <a href="#">LiÃªn Há»‡</a></p>
  </footer>

  <script src="js/main.js"></script>
  <script>
    // Sample user data for matching
    const sampleUsers = [
      { id: 1, name: 'Sarah', age: 24, avatar: 'ğŸ‘¸', city: 'TP. Há»“ ChÃ­ Minh', interests: ['Du Lá»‹ch', 'CÃ  PhÃª', 'Ã‚m Nháº¡c'], bio: 'YÃªu khÃ¡m phÃ¡ nhá»¯ng nÆ¡i má»›i vÃ  gáº·p gá»¡ con ngÆ°á»i má»›i!', compatibility: 87 },
      { id: 2, name: 'Emma', age: 23, avatar: 'ğŸ’ƒ', city: 'SÃ i GÃ²n', interests: ['Phim áº¢nh', 'Nghá»‡ Thuáº­t', 'Náº¥u Ä‚n'], bio: 'Há»a sÄ© vÃ  ngÆ°á»i yÃªu áº©m thá»±c!', compatibility: 78 },
      { id: 3, name: 'Lisa', age: 25, avatar: 'ğŸ‘¯', city: 'TP. Há»“ ChÃ­ Minh', interests: ['Thá»ƒ Dá»¥c', 'ChÆ¡i Game', 'Ã‚m Nháº¡c'], bio: 'NgÆ°á»i Ä‘am mÃª gym vÃ  chÆ¡i game!', compatibility: 82 },
      { id: 4, name: 'Jessica', age: 26, avatar: 'ğŸ§‘â€ğŸ¦°', city: 'HÃ  Ná»™i', interests: ['Du Lá»‹ch', 'Nhiáº¿p áº¢nh', 'Äá»c SÃ¡ch'], bio: 'NgÆ°á»i tÃ¬m kiáº¿m phiÃªu lÆ°u!', compatibility: 75 },
      { id: 5, name: 'Anna', age: 22, avatar: 'ğŸ‘±â€â™€ï¸', city: 'TP. Há»“ ChÃ­ Minh', interests: ['Yoga', 'Thiá»n', 'Tá»± NhiÃªn'], bio: 'TÃ¬m kiáº¿m sá»± cÃ¢n báº±ng vÃ  hÃ²a há»£p!', compatibility: 80 },
      { id: 6, name: 'Nicole', age: 27, avatar: 'ğŸ‘©â€ğŸ“', city: 'ÄÃ  Náºµng', interests: ['SÃ¡ch', 'CÃ  PhÃª', 'Du Lá»‹ch'], bio: 'GiÃ¡o viÃªn yÃªu thÃ­ch tÃ¬m tÃ²i!', compatibility: 85 }
    ];

    let currentMatchIndex = 0;
    let activeMode = null;
    let usedIds = new Set();

    function getNextUnusedUser() {
      const availableUsers = sampleUsers.filter(u => !usedIds.has(u.id));
      if (availableUsers.length === 0) {
        usedIds.clear();
        return sampleUsers[Math.floor(Math.random() * sampleUsers.length)];
      }
      const user = availableUsers[Math.floor(Math.random() * availableUsers.length)];
      usedIds.add(user.id);
      return user;
    }

    function startMatch(mode) {
      activeMode = mode;
      document.getElementById('filtersContainer').style.display = mode !== 'random' && mode !== 'voice' ? 'block' : 'none';
      showRandomMatch();
    }

    function showRandomMatch() {
      const user = getNextUnusedUser();
      document.getElementById('matchContainer').style.display = 'block';
      document.getElementById('matchAvatar').textContent = user.avatar;
      document.getElementById('matchName').textContent = `${user.name}, ${user.age}`;
      document.getElementById('matchMeta').textContent = 'ğŸ“ ' + user.city;
      document.getElementById('matchBio').textContent = `"${user.bio}"`;
      document.getElementById('compatibilityScore').textContent = user.compatibility + '%';
      document.getElementById('compatProgress').style.width = user.compatibility + '%';
      
      // Store current user in window for like/skip functions
      window.currentMatchUser = user;
      
      document.getElementById('matchInterests').innerHTML = user.interests
        .map((i, idx) => `<span class="tag ${['pink', 'purple', 'blue'][idx % 3]}">${i}</span>`)
        .join('');
    }

    function likeMatch() {
      if (!window.currentMatchUser) return;
      const user = window.currentMatchUser;
      
      // Check if user is logged in
      const currentUser = AuthManager.getCurrentUser();
      if (!currentUser) {
        showNotification('Vui lÃ²ng Ä‘Äƒng nháº­p Ä‘á»ƒ thÃ­ch ngÆ°á»i dÃ¹ng', 'error');
        window.location.href = 'account.html';
        return;
      }
      
      // Use MatchingSystem to save the like
      MatchingSystem.likeUser(user.id, user.name);
      
      // Show next match
      setTimeout(() => {
        showRandomMatch();
      }, 1500);
    }

    function skipMatch() {
      if (window.currentMatchUser) {
        MatchingSystem.skipUser(window.currentMatchUser.name);
      }
      showRandomMatch();
    }

    function viewProfile() {
      if (window.currentMatchUser) {
        const user = window.currentMatchUser;
        showNotification(`${user.name}, ${user.age} tá»« ${user.city}`, 'info');
      }
    }

    function applyFilters() {
      const ageMin = document.getElementById('ageMin')?.value || 18;
      const ageMax = document.getElementById('ageMax')?.value || 65;
      const gender = document.querySelector('input[name="lookingfor"]:checked')?.value || 'both';
      
      // Save preferences
      DataStore.savePreferences({
        ageMin: parseInt(ageMin),
        ageMax: parseInt(ageMax),
        gender: gender
      });
      
      showNotification('TÃ¹y chá»n Ä‘Ã£ Ä‘Æ°á»£c lÆ°u! âœ¨', 'success');
      showRandomMatch();
    }

    function startQuickMatch() {
      const currentUser = AuthManager.getCurrentUser();
      if (!currentUser) {
        showNotification('Vui lÃ²ng Ä‘Äƒng nháº­p Ä‘á»ƒ báº¯t Ä‘áº§u ghÃ©p cáº·p 5 phÃºt', 'error');
        return;
      }
      
      showNotification('ğŸš€ GhÃ©p cáº·p 5 phÃºt báº¯t Ä‘áº§u!', 'success');
      window.quickMatchInterval = setInterval(showRandomMatch, 7000);
    }

    function stopQuickMatch() {
      if (window.quickMatchInterval) {
        clearInterval(window.quickMatchInterval);
      }
      showNotification('â¹ï¸ GhÃ©p cáº·p Ä‘Ã£ dá»«ng', 'info');
    }

    // Load preferences on page load
    window.addEventListener('DOMContentLoaded', () => {
      const prefs = DataStore.getPreferences();
      if (document.getElementById('ageMin')) {
        document.getElementById('ageMin').value = prefs.ageMin;
        document.getElementById('ageMinDisplay').textContent = prefs.ageMin;
      }
      if (document.getElementById('ageMax')) {
        document.getElementById('ageMax').value = prefs.ageMax;
        document.getElementById('ageMaxDisplay').textContent = prefs.ageMax;
      }
    });

    // Range slider display
    document.getElementById('ageMin')?.addEventListener('change', e => {
      document.getElementById('ageMinDisplay').textContent = e.target.value;
    });
    document.getElementById('ageMax')?.addEventListener('change', e => {
      document.getElementById('ageMaxDisplay').textContent = e.target.value;
    });
    document.getElementById('distance')?.addEventListener('change', e => {
      document.getElementById('distanceDisplay').textContent = e.target.value;
    });

    // Show a match on page load
    setTimeout(() => {
      if (sampleUsers.length > 0) {
        showRandomMatch();
      }
    }, 500);
  </script>
</body>
</html>
